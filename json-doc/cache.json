{
    "doc": {
        "description": "Universal caching class: called once per request, it holds the cache system.",
        "tags": {
            "copyright": "BBN Solutions",
            "since": "Jan 23, 2016, 23:23:55 +0000",
            "category": "Cache",
            "license": "http:\/\/www.opensource.org\/licenses\/mit-license.php MIT"
        }
    },
    "name": "bbn\\cache",
    "namespace": true,
    "traits": [],
    "interfaces": [],
    "fileName": "\/home\/thomas\/domains\/apstapp.thomas.lan\/_appui\/vendor\/bbn\/bbn\/src\/bbn\/cache.php",
    "startLine": 14,
    "endLine": 673,
    "contentConstructor": {
        "file": "bbn\\cache",
        "returns": null
    },
    "methods": {
        "make_hash": {
            "name": "make_hash",
            "summary": "Makes a unique hash out of whatever value which will be used to check if the value has changed.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": true,
            "visibility": "public",
            "final": false,
            "code": "function($value)\n  {\n    if (\\is_object($value) || \\is_array($value)) {\n      $value = serialize($value);\n    }\n    return md5($value);\n  }",
            "startLine": 99,
            "endLine": 105,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 1,
            "returns": [
                "string"
            ],
            "parent": false,
            "arguments": [
                {
                    "name": "value",
                    "position": 0,
                    "type": null,
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ]
        },
        "get_type": {
            "name": "get_type",
            "summary": "Returns the type of cache engine running in the class.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": true,
            "visibility": "public",
            "final": false,
            "code": "function()\n  {\n    return self::$type;\n  }",
            "startLine": 112,
            "endLine": 115,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 0,
            "numberOfRequiredParameters": 0,
            "returns": [
                "string",
                null
            ],
            "parent": false,
            "arguments": []
        },
        "ttl": {
            "name": "ttl",
            "summary": "Returns a length in seconds based on the given parameter, allowing strings such as xl or s to be given as ttl arguments.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": true,
            "visibility": "public",
            "final": false,
            "code": "function($ttl)\n  {\n    if (str::is_integer($ttl)) {\n      return (int)$ttl;\n    }\n    if (\\is_string($ttl)) {\n      switch ($ttl) {\n        case 'xxs':\n          return 30;\n        case 'xs':\n          return 60;\n        case 's':\n          return 300;\n        case 'm':\n          return 3600;\n        case 'l':\n          return 3600*24;\n        case 'xl':\n          return 3600*24*7;\n        case 'xxl':\n          return 3600*24*30;\n      }\n    }\n    return 0;\n  }",
            "startLine": 123,
            "endLine": 147,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 1,
            "returns": [
                "int"
            ],
            "parent": false,
            "arguments": [
                {
                    "name": "ttl",
                    "position": 0,
                    "type": null,
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ]
        },
        "get_cache": {
            "name": "get_cache",
            "summary": "Returns the cache object (and creates one of the given type if it doesn't exist).",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": true,
            "visibility": "public",
            "final": false,
            "code": "function($engine = NULL)\n  {\n    self::_init($engine);\n    return self::$engine;\n  }",
            "startLine": 155,
            "endLine": 159,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 0,
            "returns": [
                "self"
            ],
            "parent": false,
            "arguments": [
                {
                    "name": "engine",
                    "position": 0,
                    "type": "string",
                    "required": false,
                    "has_default": true,
                    "default": null,
                    "default_name": ""
                }
            ]
        },
        "get_engine": {
            "name": "get_engine",
            "summary": "Alias of get_cache.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": true,
            "visibility": "public",
            "final": false,
            "code": "function($engine = NULL)\n  {\n    return self::get_cache($engine);\n  }",
            "startLine": 167,
            "endLine": 170,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 0,
            "returns": [
                "self"
            ],
            "parent": false,
            "arguments": [
                {
                    "name": "engine",
                    "position": 0,
                    "type": "string",
                    "required": false,
                    "has_default": true,
                    "default": null,
                    "default_name": ""
                }
            ]
        },
        "__construct": {
            "name": "__construct",
            "summary": "Constructor - this is a singleton: it can't be called more then once.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function($engine = NULL)\n  {\n    \/** @todo APC doesn't work *\/\n    $engine = 'files';\n    if (self::$is_init) {\n      die(\"Only one cache object can be called. Use static function cache::get_engine()\");\n    }\n    if ((!$engine || ($engine === 'apc')) && function_exists('apc_clear_cache')) {\n      self::_set_type('apc');\n    }\n    elseif ((!$engine || ($engine === 'memcache')) && class_exists(\"Memcache\")) {\n      $this->obj = new \\Memcache();\n      if ($this->obj->connect(\"127.0.0.1\", 11211)) {\n        self::_set_type('memcache');\n      }\n    }\n    elseif ($this->path = mvc::get_cache_path()) {\n      self::_set_type('files');\n    }\n  }",
            "startLine": 177,
            "endLine": 196,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 0,
            "returns": null,
            "parent": false,
            "arguments": [
                {
                    "name": "engine",
                    "position": 0,
                    "type": "string",
                    "required": false,
                    "has_default": true,
                    "default": null,
                    "default_name": "",
                    "description": "The type of engine to use"
                }
            ]
        },
        "has": {
            "name": "has",
            "summary": "Checks whether a valid cache exists for the given item.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function($item, $ttl = 0)\n  {\n    \n    if (self::$type) {\n      switch (self::$type){\n        case 'apc':\n          return apc_exists($item);\n        case 'memcache':\n          return $this->obj->get($item) !== $item;\n        case 'files':\n          $file = self::_file($item, $this->path);\n          if (is_file($file)) {\n            $t = json_decode(file_get_contents($file), true);\n            if ((!$ttl || !isset($t['ttl']) || ($ttl === $t['ttl']))\n                && (!$t['expire'] || ($t['expire'] > time()))\n            ) {\n              return true;\n            }\n            unlink($file);\n          }\n          return false;\n      }\n    }\n  }",
            "startLine": 205,
            "endLine": 228,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 2,
            "numberOfRequiredParameters": 1,
            "returns": [
                "bool"
            ],
            "parent": false,
            "arguments": [
                {
                    "name": "item",
                    "position": 0,
                    "type": "string",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": "",
                    "description": "The name of the item"
                },
                {
                    "name": "ttl",
                    "position": 1,
                    "type": null,
                    "required": false,
                    "has_default": true,
                    "default": 0,
                    "default_name": "",
                    "description": "The time-to-live value"
                }
            ]
        },
        "delete": {
            "name": "delete",
            "summary": "Removes the given item from the cache.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function($item)\n  {\n    if (self::$type) {\n      switch (self::$type){\n        case 'apc':\n          return apc_delete($item);\n        case 'memcache':\n          return $this->obj->delete($item);\n        case 'files':\n          $file = self::_file($item, $this->path);\n          if (is_file($file)) {\n            return !!unlink($file);\n          }\n          return false;\n      }\n    }\n  }",
            "startLine": 236,
            "endLine": 252,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 1,
            "returns": [
                "bool"
            ],
            "parent": false,
            "arguments": [
                {
                    "name": "item",
                    "position": 0,
                    "type": "string",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": "",
                    "description": "The name of the item"
                }
            ]
        },
        "delete_all": {
            "name": "delete_all",
            "summary": "Deletes all the cache from the given path or globally if none is given.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function($st = NULL)\n  {\n    if (self::$type === 'files') {\n      $dir = self::_dir($st, $this->path, false);\n      if (is_dir($dir)) {\n        return !!file\\dir::delete($dir, $dir === $this->path ? false : true);\n      }\n      elseif (is_file($dir.'.bbn.cache')) {\n        return !!unlink($dir.'.bbn.cache');\n      }\n    }\n    elseif (self::$type) {\n      $items = $this->items($st);\n      $res = 0;\n      foreach ($items as $item){\n        if (!$st || strpos($item, $st) === 0) {\n          switch (self::$type){\n            case 'apc':\n              $res += (int)apc_delete($item);\n              break;\n            case 'memcache':\n              $res += (int)$this->obj->delete($item);\n              break;\n          }\n        }\n      }\n      return $res;\n    }\n    return false;\n  }",
            "startLine": 260,
            "endLine": 289,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 0,
            "returns": [
                "bool"
            ],
            "parent": false,
            "arguments": [
                {
                    "name": "st",
                    "position": 0,
                    "type": "string",
                    "required": false,
                    "has_default": true,
                    "default": null,
                    "default_name": "",
                    "description": "The path of the items to delete"
                }
            ]
        },
        "clear": {
            "name": "clear",
            "summary": "Deletes all the cache globally.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function()\n  {\n    $this->delete_all();\n    return $this;\n  }",
            "startLine": 296,
            "endLine": 300,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 0,
            "numberOfRequiredParameters": 0,
            "returns": [
                "self"
            ],
            "parent": false,
            "arguments": []
        },
        "timestamp": {
            "name": "timestamp",
            "summary": "Returns the timestamp of the given item.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function($item)\n  {\n    if ($r = $this->get_raw($item)) {\n      return $r['timestamp'];\n    }\n    return null;\n  }",
            "startLine": 308,
            "endLine": 314,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 1,
            "returns": [
                "int",
                null
            ],
            "parent": false,
            "arguments": [
                {
                    "name": "item",
                    "position": 0,
                    "type": "string",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": "",
                    "description": "The name of the item"
                }
            ]
        },
        "hash": {
            "name": "hash",
            "summary": "Returns the hash of the given item.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function($item)\n  {\n    if ($r = $this->get_raw($item)) {\n      return $r['hash'];\n    }\n    return null;\n  }",
            "startLine": 322,
            "endLine": 328,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 1,
            "returns": [
                "string",
                null
            ],
            "parent": false,
            "arguments": [
                {
                    "name": "item",
                    "position": 0,
                    "type": "string",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": "",
                    "description": "The name of the item"
                }
            ]
        },
        "is_new": {
            "name": "is_new",
            "summary": "Checks whether or not the given item is more recent than the given timestamp.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function($item, $time = NULL)\n  {\n    if (!$time) {\n      return false;\n    }\n    if ($r = $this->get_raw($item)) {\n      return $r['timestamp'] > $time;\n    }\n    return true;\n  }",
            "startLine": 337,
            "endLine": 346,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 2,
            "numberOfRequiredParameters": 1,
            "returns": [
                "bool"
            ],
            "parent": false,
            "arguments": [
                {
                    "name": "item",
                    "position": 0,
                    "type": "string",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": "",
                    "description": "The name of the item"
                },
                {
                    "name": "time",
                    "position": 1,
                    "type": "int",
                    "required": false,
                    "has_default": true,
                    "default": null,
                    "default_name": "",
                    "description": "The timestamp to which the item's timestamp will be compared"
                }
            ]
        },
        "set": {
            "name": "set",
            "summary": "Stores the given value in the cache for as long as says the TTL.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function($item, $val, $ttl = 10, $exec = NULL)\n  {\n    if (self::$type) {\n      $ttl = self::ttl($ttl);\n      $hash = self::make_hash($val);\n      switch (self::$type){\n        case 'apc':\n          return \\apc_store(\n            $item, [\n            'timestamp' => microtime(1),\n            'hash' => $hash,\n            'ttl' => $ttl,\n            'value' => $val\n            ], $ttl\n          );\n        case 'memcache':\n          return $this->obj->set(\n            $item, [\n            'timestamp' => microtime(1),\n            'hash' => $hash,\n            'ttl' => $ttl,\n            'value' => $val\n            ], false, $ttl\n          );\n        case 'files':\n          $file = self::_file($item, $this->path);\n          if (file\\dir::create_path(dirname($file))) {\n            $value = [\n              'timestamp' => microtime(1),\n              'hash' => $hash,\n              'expire' => $ttl ? time() + $ttl : 0,\n              'ttl' => $ttl,\n              'exec' => $exec,\n              'value' => $val\n            ];\n            if (file_put_contents($file, json_encode($value, JSON_PRETTY_PRINT))) {\n              return true;\n            }\n          }\n      }\n    }\n    return false; \n  }",
            "startLine": 356,
            "endLine": 398,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 4,
            "numberOfRequiredParameters": 2,
            "returns": [
                "bool"
            ],
            "parent": false,
            "arguments": [
                {
                    "name": "item",
                    "position": 0,
                    "type": "string",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": "",
                    "description": "The name of the item"
                },
                {
                    "name": "val",
                    "position": 1,
                    "type": null,
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": "",
                    "description": "The value to be stored in the cache"
                },
                {
                    "name": "ttl",
                    "position": 2,
                    "type": "int",
                    "required": false,
                    "has_default": true,
                    "default": 10,
                    "default_name": "",
                    "description": "The length in seconds during which the value will be considered as valid"
                },
                {
                    "name": "exec",
                    "position": 3,
                    "type": "float",
                    "required": false,
                    "has_default": true,
                    "default": null,
                    "default_name": ""
                }
            ]
        },
        "is_changed": {
            "name": "is_changed",
            "summary": "Checks if the value of the item corresponds to the given hash.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function($item, $hash)\n  {\n    return $hash !== $this->hash($item);\n  }",
            "startLine": 407,
            "endLine": 410,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 2,
            "numberOfRequiredParameters": 2,
            "returns": [
                "bool"
            ],
            "parent": false,
            "arguments": [
                {
                    "name": "item",
                    "position": 0,
                    "type": "string",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": "",
                    "description": "The name of the item"
                },
                {
                    "name": "hash",
                    "position": 1,
                    "type": null,
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": "",
                    "description": "A MD5 hash to compare with"
                }
            ]
        },
        "block": {
            "name": "block",
            "summary": "Set the cache file in a block state so other processes don't try to create it.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function($item)\n  {\n    if (self::$type === 'files') {\n      $file = self::_file($item, $this->path);\n      if (file_exists($file) && ($t = file_get_contents($file))) {\n        $t = json_decode($t, true);\n        if (!empty($t['block'])) {\n          return false;\n        }\n      }\n      else {\n        $t = [];\n      }\n      if ($dir = self::_dir($item, $this->path)) {\n        file\\dir::create_path($dir);\n      }\n      $t['block'] = 1;\n      $t['date_block'] = date('Y-m-d H:i:s');\n      $json = json_encode($t, JSON_PRETTY_PRINT);\n      if (file_put_contents($file, $json)) {\n        return true;\n      }\n      return false;\n    }\n    return true;\n  }",
            "startLine": 418,
            "endLine": 443,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 1,
            "returns": [
                "bool"
            ],
            "parent": false,
            "arguments": [
                {
                    "name": "item",
                    "position": 0,
                    "type": "string",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ]
        },
        "unblock": {
            "name": "unblock",
            "summary": "Unset the block staate from the cache file.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function($item)\n  {\n    return true;\n    if (self::$type === 'files') {\n      $file = self::_file($item, $this->path);\n      if (file_exists($file) && ($t = file_get_contents($file))) {\n        $t = json_decode($t, true);\n        if (!empty($t['block'])) {\n          @unlink($file);\n          return true;\n        }\n        return false;\n      }\n    }\n    return true;\n  }",
            "startLine": 451,
            "endLine": 466,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 1,
            "returns": [
                "bool"
            ],
            "parent": false,
            "arguments": [
                {
                    "name": "item",
                    "position": 0,
                    "type": "string",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ]
        },
        "get": {
            "name": "get",
            "summary": "Returns the cache value, false otherwise.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function($item, $ttl = 0)\n  {\n    if ($r = $this->get_raw($item, $ttl)) {\n      return $r['value'];\n    }\n    return false;\n  }",
            "startLine": 525,
            "endLine": 531,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 2,
            "numberOfRequiredParameters": 1,
            "returns": null,
            "parent": false,
            "arguments": [
                {
                    "name": "item",
                    "position": 0,
                    "type": "string",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": "",
                    "description": "The name of the item"
                },
                {
                    "name": "ttl",
                    "position": 1,
                    "type": "int",
                    "required": false,
                    "has_default": true,
                    "default": 0,
                    "default_name": "",
                    "description": "The cache length"
                }
            ]
        },
        "get_set": {
            "name": "get_set",
            "summary": "Returns the cache for the given item, but if expired or absent creates it before by running the provided function.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function($fn, $item, $ttl = 0)\n  {\n    $tmp = $this->get_raw($item, $ttl);\n    $data = null;\n    if (!$tmp) {\n      $file = self::_file($item, $this->path);\n      $tmp_file = dirname($file).'\/_'.basename($file);\n      $do = false;\n      if (is_file($file)) {\n        rename($file, $tmp_file);\n        $do = true;\n      }\n      elseif (!is_file($tmp_file)) {\n        file\\dir::create_path(dirname($tmp_file));\n        file_put_contents($tmp_file, ' ');\n        $do = true;\n      }\n      else {\n        return $this->get($item);\n      }\n      if ($do) {\n        $timer = new util\\timer();\n        $timer->start();\n        try {\n          $data = $fn();\n        }\n        catch (\\Exception $e) {\n          unlink($tmp_file);\n          throw $e;\n        }\n        $exec = $timer->stop();\n        $this->set($item, $data, $ttl, $exec);\n        unlink($tmp_file);\n      }\n    }\n    else {\n      $data = $tmp['value'];\n    }\n    return $data;\n  }",
            "startLine": 541,
            "endLine": 580,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 3,
            "numberOfRequiredParameters": 2,
            "returns": null,
            "parent": false,
            "arguments": [
                {
                    "name": "fn",
                    "position": 0,
                    "type": "callable",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": "",
                    "description": "The name of the item"
                },
                {
                    "name": "item",
                    "position": 1,
                    "type": "string",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": "",
                    "description": "The function which returns the value for the cache"
                },
                {
                    "name": "ttl",
                    "position": 2,
                    "type": "int",
                    "required": false,
                    "has_default": true,
                    "default": 0,
                    "default_name": "",
                    "description": "The cache length"
                }
            ]
        },
        "info": {
            "name": "info",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function()\n  {\n    if (self::$type) {\n      switch (self::$type){\n        case 'apc':\n          return apc_cache_info();\n        case 'memcache':\n          return $this->obj->getStats('slabs');\n        case 'files':\n          return file\\dir::get_files($this->path);\n      }\n    }\n  }",
            "startLine": 585,
            "endLine": 597,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 0,
            "numberOfRequiredParameters": 0,
            "returns": null,
            "parent": false,
            "arguments": []
        },
        "stat": {
            "name": "stat",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function()\n  {\n    if (self::$type) {\n      switch (self::$type){\n        case 'apc':\n          return apc_cache_info();\n        case 'memcache':\n          return $this->obj->getStats();\n        case 'files':\n          return file\\dir::get_files($this->path);\n      }\n    }\n  }",
            "startLine": 602,
            "endLine": 614,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 0,
            "numberOfRequiredParameters": 0,
            "returns": null,
            "parent": false,
            "arguments": []
        },
        "items": {
            "name": "items",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\cache",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function($dir = '')\n  {\n    if (self::$type) {\n      switch (self::$type){\n        case 'apc':\n          $all = apc_cache_info();\n          $list = [];\n          foreach ($all['cache_list'] as $a){\n            array_push($list, $a['info']);\n          }\n          return $list;\n        case 'memcache':\n          $list = [];\n          $allSlabs = $this->obj->getExtendedStats('slabs');\n          foreach ($allSlabs as $server => $slabs){\n            foreach ($slabs as $slabId => $slabMeta){\n              $cdump = $this->obj->getExtendedStats('cachedump',(int)$slabId);\n              foreach ($cdump AS $keys => $arrVal){\n                foreach ($arrVal AS $k => $v){\n                  if ($k !== 'CLIENT_ERROR') {\n                    echo array_push($list, $k);\n                  }\n                }\n              }\n            }\n          }\n          return $list;\n        case 'files':\n          $cache =& $this;\n          $list = array_filter(\n            array_map(\n              function ($a) use ($dir) {\n                return ( $dir ? $dir.'\/' : '' ).basename($a, '.bbn.cache');\n              }, file\\dir::get_files($this->path.($dir ? '\/'.$dir : ''))\n            ),\n            function ($a) use ($cache) {\n              \/\/ Only gives valid cache\n              return $cache->has($a);\n            }\n          );\n          $dirs = file\\dir::get_dirs($this->path.($dir ? '\/'.$dir : ''));\n          if (\\count($dirs)) {\n            foreach ($dirs as $d){\n              $res = $this->items($dir ? $dir.'\/'.basename($d) : basename($d));\n              foreach ($res as $r){\n                array_push($list, $r);\n              }\n            }\n          }\n          return $list;\n      }\n    }\n  }",
            "startLine": 620,
            "endLine": 672,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 0,
            "returns": null,
            "parent": false,
            "arguments": [
                {
                    "name": "dir",
                    "position": 0,
                    "type": "string",
                    "required": false,
                    "has_default": true,
                    "default": "",
                    "default_name": ""
                }
            ]
        }
    },
    "properties": null,
    "staticProperties": {
        "is_init": 1,
        "type": "files",
        "max_wait": 10,
        "engine": {}
    },
    "constants": null,
    "numMethods": 22,
    "numProperties": 0,
    "numConstants": 0,
    "numStaticProperties": 4,
    "interfaceNames": [],
    "isInterface": false,
    "traitNames": [],
    "traitAliases": [],
    "isTrait": false,
    "isAbstract": false,
    "isFinal": false,
    "modifiers": 0,
    "parentClass": null,
    "isSubclassOf": false,
    "defaultProperties": {
        "is_init": false,
        "type": null,
        "max_wait": 10,
        "engine": null,
        "path": null,
        "obj": null
    },
    "isIterable": false,
    "extensionName": false,
    "namespaceName": "bbn",
    "shortName": "cache",
    "summary": "Universal caching class: called once per request, it holds the cache system."
}